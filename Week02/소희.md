HTTP가 인터넷의 배달원이라면, HTTP 메시지는 무언가를 담아 보내는 소포와 같다.

- 메시지가 어떻게 흘러가는가
- HTTP 메시지의 세 부분 (시작줄, 헤더, 개체 본문)
- 요청과 응답 메시지의 차이
- 요청 메시지가 지원하는 여러 기능(메서드)들
- 응답 메시지가 반환하는 여러 상태 코드들
- 여러 HTTP 헤더들은 무슨 일을 하는가

## 메시지의 흐름

HTTP 메시지는 HTTP 애플리케이션 간에 주고받은 데이터의 블록들이다.

데이터의 블록들은 메시지의 내용과 의미를 설명하는 텍스트 메타 정보로 시작하고 그 다음에 선택적으로 데이터가 올 수 있다.

‘인바운드’, ‘아웃바운드’, ‘업스트림’, ‘다운스트림’은 메시지의 방향을 의미하는 용어다.

### 1. 메시지는 원 서버 방향을 인바운드로 하여 송신된다

HTTP는 인바운드와 아웃바운드라는 용어를 트랜잭션 방향을 표현하기 위해 사용한다.

인바운드로 이동한다 → 메시지가 원 서버로 향함.

아웃바운드로 이동한다 → 모든 처리가 끝난 뒤에 메시지가 사용자 에이전트로 돌아오는 것.

![image.png](attachment:c54633df-14d2-4fd0-b39c-870eeebc74b6:image.png)

### 다운스트림으로 흐르는 메시지

요청이나 응답 메시지냐에 관계없이 모든 메시지는 다운스트림으로 흐른다.

메시지의 발송자는 수신자의 업스트림이다.

![image.png](attachment:d69b859c-3eee-4980-b3a6-f7212621b41f:image.png)

## 메시지의 각 부분

![image.png](attachment:79d4aea5-b3e7-4905-a8d6-8d492b3fc4d6:image.png)

HTTP 메시지는 단순한, 데이터의 구조화된 블록이다.

각 메시지는 클라이언트로부터의 요청이나 서버로부터의 응답 중 하나를 포함한다.

메시지는 시작줄, 헤더 블록, 본문으로 이루어진다.

시작줄 → 어떤 메시지인지

헤더 블록 → 속성을 나타냄

본문 → 데이터를 담고 있음

시작줄과 헤더는 줄 단위로 분리된 아스키 문자열이다.

본문은 텍스트나 이진 데이터를 포함할 수도 있고 그냥 비어있을 수도 있다.

헤더의 Content-Length는 본문의 크기를 말해준다.

### 1. 메시지 문법

모든 HTTP 메시지는 요청 혹은 응답 메시지로 분류된다.

요청 메시지는 웹 서버에 어떤 동작을 요구한다.

응답 메시지는 요청의 결과를 클라이언트에게 돌려준다.

**요청 메시지 형식**

![image.png](attachment:b4aa6c40-2990-432f-8c1d-e0be8a5d5fae:image.png)

**응답 메시지 형식**

![image.png](attachment:2eab9b48-f37e-4acb-b854-a2d49fa29000:image.png)

둘의 시작줄만 문법이 다르다.

- 메서드:
  - 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작이다.
  - GET, HEAD, POST
- 요청 URL:
  - 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소
- 버전
  - 이 메시지에서 사용중인 HTTP 버전
  - HTTP/<메이저>,<마이너>
- 상태 코드
  - 요청 중에 무엇이 일어났는지 설명하는 세 자리 숫자
- 사유 구절
  - 숫자로 된 상태 코드의 의미를 사람이 이해할 수 있게 설명해주는 짧은 문구
- 헤더들
  - 이름, 콜론(:), 선택적인 공백, 값, CRLF가 순서대로 나타나는 0개 이상의 헤더들.
  - 헤더의 목록은 빈 줄(CRLF)로 끝나 헤더 목록의 끝과 엔터티 본문의 시작을 표시한다.
- 엔터티 본문
  - 임의의 데이터 블록을 포함한다.
  - 헤더나 엔티티 본문이 없더라도 HTTP 헤더의 집합은 항상 빈 줄 (그냥 CRLF)로 끊나야 함에 주의하라.
  ![image.png](attachment:9080505e-4884-454c-848e-967a5f76a890:image.png)

### 2. 시작줄

- 요청줄
  - 서버에게 리소스에 대해 무언가를 해달라고 부탁한다.
  - 요청 메서드, 동작에 대한 대상 요청 URL, 클라이언트의 HTTP 버전, 서버 HTTP 버전
  - 위 필드는 모두 공백으로 구분됨.
- 응답줄
  - 수행 결과의 상태 정보 및 결과 데이터.
  - 응답 메시지에 쓰인 HTTP 버전, 상태 코드, 상태 설명 사유 구절
  - 모든 필드 공백으로 구분됨.
- 메서드
  ![image.png](attachment:48de0929-1b73-426e-aae5-8a46cac08b3c:image.png)
- 상태 코드
  - 클라이언트에게 무엇이 일어났는지 말해줌.
- 사유 구절
- 버전 번호
  - 프로토콜 버전

### 3. 헤더

시작줄 다음에는 0개, 1개 혹은 여러 개의 HTTP 헤더가 온다.

요청과 응답 메시지에 추가 정보를 더한다.

- 헤더 분류
  - 일반 헤더
    - 요청, 응답 몸두 나타날 수 있음
  - 요청 헤더
    - 요청에 대한 부가 정보
  - 응답 헤더
    - 응답에 대한 부가 정보
  - Entity 헤더
    - 본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술
  - 확장 헤더
    - 명세에 정의되지 않은 새로운 헤더
    ![image.png](attachment:c01c94cf-cd68-444f-9b5e-f53b07329d5c:image.png)
  - 헤더를 여러 줄로 나누기
    - 긴 헤더 줄은 여러 줄로 쪼갤 수 있는데, 추가 줄 앞에는 최소 하나의 스페이스 혹은 탭 문자가 와야함.
    ![image.png](attachment:61359907-5628-4224-91ae-df5b5d0297e0:image.png)

### 4. 엔터티 본문

HTTP 메시지의 세 번째 부분은 선택적인 엔터티 본문이다.

HTTP 메시지의 화물이라고 할 수 있음.

이미지, 비디오, HTML 문서, 소프트웨어 애플리케이션, 신용카드 트랜잭션, 전자우편 등 여러 종류의 디지털 데이터를 실어나를 수 있음.

### 5. 버전 0.9 메시지

HTTP 프로토콜의 초기 버전.

버전 정보 없음.

사앹코드나 사유구절, 헤더도 없음.

여전히 이걸 사용하는 클라, 서버 들이 있기 때문에, 이 제약애 대해 알아둘 수 있게하기 위함.

## 메서드

### 1. 안전한 메서드

- GET, HEAD
- HTTP 요청의 결과로 서버에 어떤 작용도 없음을 의미.
- 요청의 결과로 서버에서 일어나는 일은 아무것도 없음을 의미.
- 그렇다고 작용을 유발안한다고 보장할 수 는 없음. 개발자에 달림.
- 안전한 메서드의 목적은, 서버에 어떤 영향을 줄 수 있는 안전하지 않은 메서드가 사용될 때 사용자들에게 그 사실을 알려주는 HTTP 애플리케이션을 만들 수 있도록 하는 것.

### 2. GET

서버에 리소스 달라고 요청할 때.

### 3. HEAD

GET 처럼 행동하지만, 서버는 응답으로 헤더만 돌려주고 엔터티 본문은 반환되지 않음.

- 리소스를 가져오지 않아도 그에 대해 무엇인가를 알아낼 수 있다.
- 응답의 상태 코드를 통해, 개체가 존재하는지 확인 가능.
- 헤더 확인하여 리소스가 변경되었는지 검사 가능.

### 4. PUT

서버에 문서를 쓴다.

요청의 본문 갖고 요청 URL의 이름대로 새 문서를 만들거나, 이미 URL이 존재한다면 본문을 사용해서 교체하는 것이다.

### 5. POST

서버에 입력 데이터를 전송하기 위함.

### 6. TRACE

진달을 위해 사용됨.

요청이 의도한 요청/응답 연쇄를 거쳐가는 검사 가능.

프락시나 다른 애플리케이션들이 요청에 어떤 영향을 미치는지 확인해볼 수 있음

목적지 서버에서 루프백 진단을 시작함. loopback

요청 전송의 마지막 단계에 있는 서버는 자신이 받은 요청 메시지를 본문에 넣어 TRACE 응답을 되돌려줌.

클라는 자신과 서버 사이에 있는 모든 HTTP 애플리케이션의 요청/응답 연쇄를 따라가면서 자신이 보낸 메시지가 망가졌거나 수정되었는지, 그렇다면 어떻게 변경되었는지 확인할 수 있다.

![image.png](attachment:c4992c94-0b33-456b-af5d-22030164f71b:image.png)

### 7. OPTIONS

서버에게 특정 리소스에 대해 어떤 메서드가 지원되는지 물어볼 수 있다.

### 8. DELETE

서버에게 요청 URL로 지정한 리소르르 삭제할 것을 요청한다.

### 9. 확장 메서드

HTTP/1.1 명세에 정의되지 않은 메서드로,

개발자들이 서버가 관리하는 리소스에 대한 능력을 확장하는 수단을 제공해줌.

![image.png](attachment:94b8b379-7a79-4625-9c12-3a19b67deaa2:image.png)

![image.png](attachment:64abfcac-2780-4f78-b7f2-2202f9bde82c:image.png)

## 상태 코드

클라에게 그들의 트랜잭션을 이해할 수 있는 쉬운 방법을 제공한다.

### 1. 100-199: 정보성 상태 코드

### 2. 200-299: 성공 상태 코드

### 3. 300-399: 리다이렉션 상태 코드

### 4. 400-499: 클라이언트 에러 상태 코드

### 5. 500-599: 서버 에러 상태 코드

## 헤더

### 1. 일반 헤더

### 2. 응답 헤더

### 3. 엔터티 헤더

### 4. 확장 헤더

###
